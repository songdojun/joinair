<!DOCTYPE html>
<html>
<head>
    <title>매출 보고서</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            background-color: #4CAF50;
            color: white;
            padding: 10px 0;
        }

        #reportForm {
            text-align: center;
            margin: 20px;
        }

        select, input, button {
            margin: 10px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
<h1>매출 보고서</h1>
<div id="salesReportContainer">
<form action="/admin/sales/reportData" method="get" id="reportForm">
    <label for="reportType">보고서 유형 선택:</label>
    <select name="reportType" id="reportType">
        <option value="daily">일일</option>
        <option value="monthly">월간</option>
        <option value="yearly">연간</option>
        <option value="custom">사용자 지정</option>
    </select>
    <label for="year">연도:</label>
    <input type="number" name="year" id="year" value="2023">
    <label for="month">월:</label>
    <select name="month" id="month">
        <option value="01">1월</option>
        <option value="02">2월</option>
        <option value="03">3월</option>
        <option value="04">4월</option>
        <option value="05">5월</option>
        <option value="06">6월</option>
        <option value="07">7월</option>
        <option value="08">8월</option>
        <option value="09">9월</option>
        <option value="10">10월</option>
        <option value="11">11월</option>
        <option value="12">12월</option>
    </select>
    <label for="user">사용자 ID:</label>
    <input type="text" name="user" id="user" disabled> <!-- 초기에 비활성화 -->
    <button type="submit">보고서 생성</button>
</form>
<br>

<div>
    <table>
        <tr>
            <th>날짜</th>
            <th>금액</th>
            <th>제품 코드</th>
            <th>사용자 ID</th>
            <th>주문 번호</th> <!-- ORDERS_NUM 추가 -->
        </tr>
        {{#salesData}}
            <tr>
                <td>{{sales_Date}}</td>
                <td>{{amount}}</td>
                <td>{{Pro_Code}}</td>
                <td>{{User_Id}}</td>
                <td>{{ORDERS_NUM}}</td> <!-- ORDERS_NUM 추가 -->
            </tr>
        {{/salesData}}
    </table>
</div>

<script>
    var reportTypeSelect = document.getElementById("reportType");
    var monthSelect = document.getElementById("month");
    var yearInput = document.getElementById("year");
    var userInput = document.getElementById("user");

    // 초기 설정
    monthSelect.disabled = true;
    yearInput.disabled = true;
    userInput.disabled = true;

    reportTypeSelect.addEventListener("change", function() {
        // 선택한 보고서 유형에 따라 선택창을 표시하거나 숨깁니다.
        if (this.value === "monthly") {
            monthSelect.disabled = false;
            yearInput.disabled = false;
            userInput.disabled = true; // 월별 선택 시 사용자 ID 입력 창 비활성화
        } else if (this.value === "yearly") {
            monthSelect.disabled = true;
            yearInput.disabled = false;
            userInput.disabled = true; // 연간 선택 시 사용자 ID 입력 창 비활성화
        } else if (this.value === "custom") {
            monthSelect.disabled = true;
            yearInput.disabled = true;
            userInput.disabled = false; // 사용자 정의 선택 시 사용자 ID 입력 창 활성화
        } else {
            monthSelect.disabled = true;
            yearInput.disabled = true;
            userInput.disabled = true; // 다른 옵션 선택 시 모든 입력 창 비활성화
        }
    });
</script>
<script>
    // 페이지가 로드될 때 테이블 초기화
    function initializeTable() {
        var table = document.querySelector("table");
        var rows = table.querySelectorAll("tr");
        for (var i = 1; i < rows.length; i++) { // 첫 번째 행은 헤더
            rows[i].style.display = ""; // 모든 행을 표시
        }
    }

    // 키워드로 테이블 필터링
    function filterTable() {
        var input = document.getElementById("searchInput");
        var filter = input.value.toUpperCase();
        var table = document.querySelector("table");
        var rows = table.querySelectorAll("tr");

        for (var i = 1; i < rows.length; i++) { // 첫 번째 행은 헤더
            var columns = rows[i].querySelectorAll("td");
            var found = false;

            for (var j = 0; j < columns.length; j++) {
                var cell = columns[j];
                if (cell) {
                    var txtValue = cell.textContent || cell.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }
            }

            if (found) {
                rows[i].style.display = ""; // 키워드를 포함하는 행을 표시
            } else {
                rows[i].style.display = "none"; // 키워드를 포함하지 않는 행을 숨김
            }
        }
    }

    window.onload = function() {
        initializeTable(); // 페이지 로드 시 테이블 초기화
    }
</script>
</body>
</html>
