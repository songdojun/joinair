<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>고객 정보 리스트</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        h1 {
            background-color: #007bff;
            color: #fff;
            padding: 10px;
            text-align: center;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
            background-color: #fff;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: #fff;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .action-links {
            display: flex;
            justify-content: space-around;
        }
    </style>
</head>
<body>
{{#isAdmin}}
    <h1>고객 정보 리스트</h1>
    <a href="/logout">Logout</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="/adminWelcome">Welcome 페이지로 가기</a>


    <h2 style="text-align: center;">User List</h2>
    <div>
        <label for="searchCategory">검색 카테고리:</label>
        <select name="searchCategory">
            <option value="User_Id">고객 ID</option>
            <option value="User_Name">고객 Name</option>
            <option value="User_Phone">고객 전화번호</option>
        </select>
        <input type="text" id="searchInput" placeholder="검색어 입력">
        <button id="searchButton">검색</button>
    </div>
    <table>
        <thead>
        <tr>
            <th>고객 ID</th>
            <th>고객 Name</th>
            <th>고객 E-mail</th>
            <th>고객 주소</th>
            <th>고객 전화번호</th>
            <th>고객 마일리지</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {{#users}}
            <tr>
                <td data-category="User_Id">{{User_Id}}</td>
                <td data-category="User_Name">{{User_Name}}</td>
                <td>{{User_Email}}</td>
                <td>{{User_Address}}</td>
                <td data-category="User_Phone">{{User_Phone}}</td>
                <td>{{User_Mileage}}</td>
                <td class="action-links">
                    <a href="/adminEditUserList/{{User_Id}}">Edit</a>
                </td>
            </tr>
        {{/users}}
        </tbody>
    </table>
{{/isAdmin}}
{{^isAdmin}}
    <!-- Redirect to login page for non-admin users -->
    <script>
        window.location.href = "/signInUp"; // Replace with the actual URL of your login page
    </script>
{{/isAdmin}}
<script>
    document.getElementById('searchInput').addEventListener('keyup', function (event) {
        if (event.key === 'Enter') {
            document.getElementById('searchButton').click();
        }
    });

    document.getElementById('searchButton').addEventListener('click', function () {
        // 검색 카테고리와 검색어 가져오기
        var searchCategory = document.querySelector('select[name="searchCategory"]').value;
        var searchInput = document.getElementById('searchInput').value.toLowerCase();

        // 모든 행을 가져옴
        var rows = document.querySelectorAll('table tbody tr');

        // 각 행에 대해 검색어 일치 여부 확인
        rows.forEach(function (row) {
            var cell = row.querySelector('td[data-category="' + searchCategory + '"]');
            if (cell) {
                if (cell.textContent.toLowerCase().includes(searchInput)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
        });
    });
</script>
</body>
</html>